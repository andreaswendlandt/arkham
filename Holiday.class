<?php
/* Klasse: Holiday
 * Zweck: Klasse, die sämtliche benötigten Daten generiert
 */
class Holiday
{
	private $conn;
	private $db_name;
	private $host;
	private $user;
	private $password;
	function connectHost($credential_file)
	{
		include("$credential_file");
		$this->conn = new mysqli($host,$user,$password);
		if(mysqli_connect_errno())
		{
			throw new Exception("Datenbank nicht verf&uuml;gbar, kontaktieren Sie bitte den Administrator dieser Seite");
			exit();
		}
		$this->host = $host;
		$this->user = $user;
		$this->password = $password;
	}
	function selectDatabase($database)
	{
		$db = $this->conn->select_db($database);
		if(mysqli_errno($this->conn))
		{
			throw new Exception("Datenbank nicht verf&uuml;gbar, kontaktieren Sie bitte den Administrator dieser Seite");
			exit();
		}
		$this->db_name = $database;
	}
	function getContinents()
	{
		$sql = "SELECT DISTINCT kontinent FROM urlaubsziele ORDER BY kontinent";
		if(!$result = $this->conn->query($sql))
		{
			throw new Exception(mysqli_error($this->conn));
			exit();
		}
		while($row=$result->fetch_array())
		{
			$array_continent[$row['kontinent']][]=$row['land'];
		}
		return $array_continent;
	}
	function getAllHotels($type)
	{
		$sql = "SELECT * FROM urlaubsziele WHERE kontinent='$type' ORDER BY hotel";
		if(!$result = $this->conn->query($sql))
		{
			throw new Exception(mysqli_error($this->conn));
			exit();
		}
		$n=1;
		while($row=$result->fetch_object())
		{
			$array_all[$n] = $row;
			$n++;
		}
		return $array_all;
	}
	function displayContinents()
	{
		$continent = $this->getContinents();
		include("first_site.inc");
	}
	function displayContinentData($type)
	{
		$all = $this->getAllHotels($type);
		$n_destination = sizeof($all);
		$n_start = 1;
		$n_end = $n_destination;
		include("second_site.inc");
	}
}
?>

		
